# 多功能桌面应用 (Desktop App)

这是一个使用 Tauri 2、Vue 3 和 TypeScript 开发的多功能桌面应用程序。应用程序的主界面为控制面板，用户可以通过该面板选择并进入不同的功能模块。

## 项目概述

该应用程序通过模块化设计，整合了多种常用功能，包括：

- 工具类：计算器、记事本等
- 媒体类：音乐播放器、视频播放器等
- 系统类：系统监控等
- 开发类：代码编辑器等

## 技术栈

- **前端框架**：Vue 3
- **构建工具**：Vite 5
- **桌面应用框架**：Tauri 2
- **UI 库**：Element Plus
- **路由管理**：Vue Router 4
- **拖拽排序**：Vue Draggable Next

## 开发进度

- [x] 项目初始化
- [x] 主控制面板设计与实现
- [ ] 功能模块实现
- [ ] 应用程序测试与优化

## 开发与运行

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run tauri dev
```

### 构建应用

```bash
npm run tauri build
```

### 安卓开发（可选）

```bash
npm run tauri android dev
```

## 推荐开发环境

- [VS Code](https://code.visualstudio.com/) + [Volar](https://marketplace.visualstudio.com/items?itemName=Vue.volar) + [Tauri](https://marketplace.visualstudio.com/items?itemName=tauri-apps.tauri-vscode) + [rust-analyzer](https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer)

## 开发计划与步骤

### 1. 项目初始化与环境配置
- [x] 创建 Tauri + Vue3 + Vite5 项目
- [x] 配置开发环境
- [x] 安装必要依赖（Element Plus, Vue Router等）
- [x] 设置项目基础结构

### 2. 主控制面板开发
- [x] 主控制面板设计文档
- [x] 实现卡片式布局组件
- [x] 开发侧边栏导航组件
- [x] 实现顶部栏组件
- [x] 整合面板组件与导航功能
- [x] 添加主题切换功能（暗黑模式支持）
- [x] 添加平滑的主题切换过渡动画效果
- [x] 修复主题切换器图标显示问题
- [x] 添加内容区域滚动条，优化多功能卡片显示
- [x] 添加侧边栏收缩/展开功能
- [x] 优化功能卡片网格布局和响应式设计
- [x] 改进主题图标显示，使图标与选择的主题模式一致
- [x] 修复类别切换时UI元素位置偏移问题
- [x] 添加页面切换过渡动画效果
- [x] 优化侧边栏收缩/展开动画，增强过渡效果
- [x] 修复主题切换图标不能实时反映当前主题状态的问题
- [x] 添加功能卡片排序功能，支持自定义排序、按名称排序和按最近使用排序
- [x] 实现拖拽排序功能，允许用户自由调整卡片顺序
- [x] 优化数据存储机制，确保主题设置和卡片排序在不同页面和重启后保持一致

### 3. 功能模块开发
- [ ] 设计各功能模块界面
- [ ] 实现功能模块组件
- [ ] 开发模块状态管理
- [ ] 集成各模块与主控制面板

### 4. 后端集成
- [ ] 使用Tauri API开发后端功能
- [ ] 实现前后端通信
- [ ] 处理本地文件与系统交互

### 5. 测试与优化
- [ ] 单元测试与集成测试
- [ ] 性能优化
- [ ] 用户体验改进
- [ ] 跨平台兼容性测试

### 6. 打包与发布
- [ ] 配置打包脚本
- [ ] 生成不同平台安装包
- [ ] 编写用户手册

## 功能模块设计

### 1. 主控制面板
作为应用程序的中央枢纽，提供对所有功能模块的访问入口。包含卡片式布局、侧边栏导航、顶部搜索栏和状态指示。

- **功能卡片**：显示各功能模块，支持自定义排序和多种排序方式
- **侧边栏**：提供分类导航，可折叠/展开
- **主题切换**：支持亮色/暗黑/系统主题，并保持全局一致

### 2. 文件管理模块
提供文件浏览、管理和操作功能，包括文件浏览器、基本文件操作、搜索和预览功能。

### 3. 系统监控模块
监控系统资源使用情况和性能指标，显示CPU使用率、内存使用、磁盘使用和网络监控等信息。

### 4. 笔记模块
提供记事本功能，支持文本编辑和格式化，包含富文本编辑器、笔记管理和分类功能。

### 5. 日程管理模块
日历和待办事项管理工具，提供多视图切换、事件管理和提醒功能。

## 数据存储

应用使用LocalStorage存储用户偏好设置和配置信息：

1. **主题设置**：存储用户选择的主题模式(亮色/暗黑/系统)，并在所有页面和重启后保持一致。
   ```js
   // 存储主题设置
   localStorage.setItem('theme', themeValue);
   
   // 读取主题设置
   const savedTheme = localStorage.getItem('theme') || 'system';
   ```

2. **功能模块排序**：存储用户自定义的模块排序和排序模式。
   ```js
   // 存储模块数据和排序方式
   localStorage.setItem('modules', JSON.stringify(modules));
   localStorage.setItem('sortType', sortType);
   ```

3. **界面设置**：存储侧边栏收缩状态等UI偏好。
   ```js
   // 保存侧边栏状态
   localStorage.setItem('sidebarCollapsed', isCollapsed.toString());
   ```

## 自定义图标使用指南

应用支持使用自定义SVG图标。SVG图标文件应放置在 `src/assets/icons` 目录下。

### 如何使用自定义图标

1. **在模块定义中使用**：
   ```js
   const modules = [
     {
       name: '计算器',
       // Element Plus图标（作为备用）
       icon: 'Calculator',
       // 自定义SVG图标名称（不需要.svg扩展名）
       customIconName: '计算器',
       // 启用自定义图标
       useCustomIcon: true,
       // 其他属性...
     }
   ];
   ```

2. **在组件中直接使用**：
   ```vue
   <CustomIcon 
     name="计算器" 
     color="#67C23A" 
     fallback-icon="Calculator"
   />
   ```

3. **使用JavaScript动态加载**：
   ```js
   import { getIconByName } from '@/utils/svgLoader';

   // 使用中文名称直接加载
   const calculatorIcon = await getIconByName('计算器');
   
   // 使用映射表中的英文名称加载
   const calculatorIcon = await getIconByName('calculator');
   ```

### 图标命名约定

- 中文名称：如`计算器.svg`、`记事本.svg`
- 英文映射：在`src/utils/svgLoader.ts`中的`iconNameMap`定义

## 项目更新记录

- 2025-03-12: 项目初始化，设计并实现主控制面板界面
- 2025-03-12: 添加主题切换功能，支持亮色/暗黑模式和系统主题跟随
- 2025-03-12: 优化主题切换动画，增加平滑过渡效果
- 2025-03-12: 添加自定义SVG图标支持，实现多种图标显示方式
- 2025-03-12: 修复主题切换器图标显示问题，确保图标正确反映当前主题
- 2025-03-12: 为主内容区域添加滚动条，优化功能卡片在空间不足时的显示体验
- 2025-03-12: 优化侧边栏导航样式，增加更多功能模块入口
- 2025-03-12: 添加侧边栏收缩/展开功能，改进用户界面交互
- 2025-03-12: 更新功能卡片为网格布局，优化响应式设计，增强移动设备适配
- 2025-03-12: 改进主题切换器图标显示，使图标与选择的主题模式对应
- 2025-03-12: 修复类别切换时搜索框位置偏移问题
- 2025-03-12: 添加页面内容切换动画效果，提升用户体验
- 2025-03-12: 优化侧边栏收缩/展开动画，添加图标旋转、内容过渡和平滑效果
- 2025-03-12: 修复主题切换图标不能实时反映当前主题状态的问题，确保图标显示与实际应用的主题一致
- 2025-03-12: 添加功能卡片多种排序方式，包括自定义排序、按名称排序和按最近使用排序
- 2025-03-12: 实现功能卡片拖拽排序功能，提供编辑模式和视觉反馈
- 2025-03-12: 增强数据持久化机制，确保主题设置和卡片排序在应用重启后保持一致

## 下一阶段计划

1. 完成详细的功能模块设计规格
2. 实现各功能模块的基础界面
3. 逐步实现各功能模块的核心功能
4. 进行跨平台测试与优化